import{j as e,C as F,I as L,i as g,L as N,r as u,o as I,u as v,t as E,V as k,b,n as S,e as B,M,p as z,q as H}from"./index-EldtvfEb.js";import{e as T,r as $,D as P,M as A,T as R,a as O}from"./TransactionsTotalAmount-C9NHIFwD.js";import{F as G,b as U,d as V}from"./ToasterSuccess-BNFD-eE0.js";const Y="_searchForm_1ckz1_1",q="_searchFields_1ckz1_5",Q="_fieldWrapper_1ckz1_11",J="_searchInput_1ckz1_15",K="_fieldIcon_1ckz1_42",X="_clearDateIcon_1ckz1_43",h={searchForm:Y,searchFields:q,fieldWrapper:Q,searchInput:J,fieldIcon:K,clearDateIcon:X},Z="_datePicker_1mgs7_1",ee={datePicker:Z},te=({selectedDate:t,handleDateChange:s})=>{const a={...T,options:{...T.options,weekStartsOn:1}};return $("custom-en",a),e.jsx(e.Fragment,{children:e.jsx(P,{className:ee.datePicker,dateFormat:"dd/MM/yyyy",locale:"custom-en",selected:t,onChange:n=>s(n)})})},se=({setSearchQuery:t,setSelectedDate:s,selectedDate:a,setHasUserPickedDate:n,hasUserPickedDate:o})=>{const r=l=>{setTimeout(()=>{t(l)},250)},c=l=>{s(l),n(!0)},d=()=>{s(new Date),n(!1)};return e.jsx(G,{children:e.jsx(U,{className:h.searchForm,autoComplete:"false",children:e.jsxs("div",{className:h.searchFields,children:[e.jsxs("div",{className:h.fieldWrapper,children:[e.jsx(V,{className:h.searchInput,name:"text",onChange:l=>r(l.target.value),placeholder:"Search for anything.."}),e.jsx(F,{className:h.fieldIcon,color:"#0EF387",size:20})]}),e.jsxs("div",{className:h.fieldWrapper,children:[e.jsx(te,{selectedDate:a,handleDateChange:c}),o?e.jsx(L,{className:h.clearDateIcon,color:"#0EF387",size:20,onClick:d}):e.jsx(A,{className:h.fieldIcon,color:"#0EF387",size:20})]})]})})})},ae="_section_a00hz_1",ne="_transactionWrapper_a00hz_5",w={section:ae,transactionWrapper:ne},re="_summaryWrapper_10olu_1",le="_summaryTextWrapper_10olu_5",oe="_summaryTitle_10olu_9",ce="_summaryDescription_10olu_17",f={summaryWrapper:re,summaryTextWrapper:le,summaryTitle:oe,summaryDescription:ce},ie=({transactionsType:t})=>e.jsxs("div",{className:f.summaryWrapper,children:[e.jsxs("div",{className:f.summaryTextWrapper,children:[e.jsx("h2",{className:f.summaryTitle,children:t==="expenses"?"All Expense":"All Income"}),e.jsx("p",{className:f.summaryDescription,children:t==="expenses"?"View and manage every transaction seamlessly! Your entire financial landscape, all in one place.":"Track and celebrate every bit of earnings effortlessly! Gain insights into your total revenue in a snap."})]}),e.jsx(R,{})]}),de="_tableWrapper_1wpwh_1",pe="_tableHeaderWrapper_1wpwh_5",ue="_tableHeaderCell_1wpwh_13",he="_tableBodyWrapper_1wpwh_19",me="_loaderWrapper_1wpwh_30",p={tableWrapper:de,tableHeaderWrapper:pe,tableHeaderCell:ue,tableBodyWrapper:he,loaderWrapper:me};function _e(t){return g({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M2,7 L20,7 M16,2 L21,7 L16,12 M22,17 L4,17 M8,12 L3,17 L8,22"},child:[]}]})(t)}const xe="_emptyWrapper_4i0h5_1",ye="_emptyIcon_4i0h5_10",je="_text_4i0h5_14",fe="_link_4i0h5_20",y={emptyWrapper:xe,emptyIcon:ye,text:je,link:fe},We=({transactionsType:t})=>e.jsxs("div",{className:y.emptyWrapper,children:[e.jsx(_e,{className:y.emptyIcon,size:100}),e.jsx("p",{className:y.text,children:"Nothing here yet!"}),t==="expenses"?e.jsx(N,{className:y.link,to:"/transactions/expenses",children:"Start your way in economy!"}):e.jsx(N,{className:y.link,to:"/transactions/incomes",children:"Start your way in economy!"})]}),ge=(t,s,a,n)=>{const o=a.toLocaleDateString("en-CA");return n?t.filter(r=>(r==null?void 0:r.date)===o):s?t.filter(r=>r==null?void 0:r.comment.toLowerCase().includes(s.toLowerCase())):t};function be(t){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function Ce(t){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}const Ne="_tableRow_1j7l9_1",ke="_tableCell_1j7l9_7",Te="_actionButtonsWrapper_1j7l9_15",we="_editButton_1j7l9_20",De="_deleteButton_1j7l9_21",Ie="_buttonIcon_1j7l9_49",ve="_backdrop_1j7l9_105",Se="_modalContent_1j7l9_115",i={tableRow:Ne,tableCell:ke,actionButtonsWrapper:Te,editButton:we,deleteButton:De,buttonIcon:Ie,backdrop:ve,modalContent:Se},Fe=(t,s)=>{if(s<767){if(t.length>8&&t.slice(0,8).endsWith(" "))return t.slice(0,7).padEnd(10,"...");if(t.length>8&&t.length<12)return t.slice(0,4).padEnd(7,"...");if(t.length>12)return t.slice(0,5).padEnd(8,"...")}if(s>767&&s<1440){if(t.length>8&&t.slice(0,8).endsWith(" "))return t.slice(0,7).padEnd(10,"...");if(t.length>8&&t.length<12)return t.slice(0,6).padEnd(9,"...");if(t.length>12)return t.slice(0,8).padEnd(11,"...")}return s>=1440&&t.length>16?t.slice(0,15).padEnd(18,"..."):t},D=(t,s=1440)=>{const a=new Date(t),n={Monday:"Mo",Tuesday:"Tu",Wednesday:"We",Thursday:"Th",Friday:"Fr",Saturday:"Sa",Sunday:"Su"},o=a.toLocaleDateString("en-US",{weekday:"long"}),r=a.getDate(),c=String(a.getMonth()+1).padStart(2,"0"),d=a.getFullYear(),l=`${n[o]}, ${r}.${c}.${d}`;if(s<=1439){if(l.length===13)return l.slice(0,5).padEnd(8,"...");if(l.length===14)return l.slice(0,6).padEnd(9,"...")}return l},Le=(t,s=8)=>t.length>s?`${t.slice(0,s)}...`:t,Ee=({transaction:{_id:t,type:s,category:a,comment:n,date:o,time:r,sum:c,currency:d="UAH"},userWindowWidth:l,openModal:_,setTransactionToDelete:m})=>{const[j,x]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:i.tableRow,children:[e.jsx("p",{className:i.tableCell,title:a.categoryName,children:Le(a.categoryName)}),e.jsx("p",{className:i.tableCell,title:n,children:Fe(n,l)}),e.jsx("p",{className:i.tableCell,title:D(o),children:D(o,l)}),e.jsx("p",{className:i.tableCell,children:r}),e.jsx("p",{className:i.tableCell,children:`${c} / ${d}`}),e.jsxs("div",{className:i.actionButtonsWrapper,children:[e.jsxs("button",{className:i.editButton,type:"button",onClick:()=>x(!0),children:[e.jsx(be,{className:i.buttonIcon,color:"#0c0d0d"}),e.jsx("span",{children:"Edit"})]}),e.jsxs("button",{className:i.deleteButton,type:"button",onClick:()=>{m({_id:t,type:s,sum:c}),_()},children:[e.jsx(Ce,{className:i.buttonIcon,color:"#fafafa"}),e.jsx("span",{children:"Delete"})]})]})]}),j&&e.jsx("div",{className:i.backdrop,onClick:()=>x(!1),children:e.jsx("div",{className:i.modalContent,onClick:W=>W.stopPropagation(),children:e.jsx(O,{transaction:{_id:t,type:s,category:a._id,date:o,time:r,sum:c,comment:n,currency:d},isModal:!0,onClose:()=>x(!1)})})})]})},Be=()=>{const{closeModal:t}=I(),s=v();return async({_id:n,type:o,sum:r})=>{try{await s(E({_id:n,type:o,sum:r})).unwrap(),k.success("transaction deleted"),t()}catch(c){k.error(c.message||"error delete")}}},Me=({transactions:t,transactionsType:s,userWindowWidth:a,selectedDate:n,searchQuery:o,hasUserPickedDate:r})=>{const[c,d]=u.useState([]),{isModalOpen:l,openModal:_}=I(),m=Be(),[j,x]=u.useState(null),W=b(S);return u.useEffect(()=>{d(ge(t,o,n,r))},[t,o,n,r]),W?e.jsx("div",{className:p.loaderWrapper,children:e.jsx(B,{})}):e.jsxs(e.Fragment,{children:[l&&e.jsx(M,{title:"Are you sure you want to delete this transaction?",confirmButton:"Delete",confirmFc:()=>m(j)}),c.length===0?e.jsx(We,{transactionsType:s}):e.jsxs("div",{className:p.tableWrapper,children:[e.jsxs("div",{className:p.tableHeaderWrapper,children:[e.jsx("p",{className:p.tableHeaderCell,children:"Category"}),e.jsx("p",{className:p.tableHeaderCell,children:"Comment"}),e.jsx("p",{className:p.tableHeaderCell,children:"Date"}),e.jsx("p",{className:p.tableHeaderCell,children:"Time"}),e.jsx("p",{className:p.tableHeaderCell,children:"Sum"}),e.jsx("p",{className:p.tableHeaderCell,children:"Actions"})]}),e.jsx("div",{className:p.tableBodyWrapper,children:c.map(C=>e.jsx(Ee,{transaction:C,userWindowWidth:a,setTransactionToDelete:x,openModal:_},C._id))})]})]})},ze=()=>{const{transactionsType:t}=z();return{transactions:b(a=>a.transactions[t]),transactionsType:t}},He=()=>{const[t,s]=u.useState(window.innerWidth);return u.useEffect(()=>{const a=()=>s(window.innerWidth);return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t},Re=()=>{const[t,s]=u.useState(!1),{transactions:a,transactionsType:n}=ze(),[o,r]=u.useState(new Date),[c,d]=u.useState(""),l=b(S),_=He(),m=v();return u.useEffect(()=>{(async()=>{await m(H({type:n})).unwrap()})()},[m,n]),e.jsxs(e.Fragment,{children:[l,e.jsx("section",{className:w.section,children:e.jsxs("div",{className:"container",children:[e.jsx(ie,{transactionsType:n}),e.jsxs("div",{className:w.transactionWrapper,children:[e.jsx(se,{setSearchQuery:d,setSelectedDate:r,selectedDate:o,setHasUserPickedDate:s,hasUserPickedDate:t}),e.jsx(Me,{userWindowWidth:_,searchQuery:c,selectedDate:o,transactions:a,hasUserPickedDate:t,transactionsType:n})]})]})})]})};export{Re as default};
